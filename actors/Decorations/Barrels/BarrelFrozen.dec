ACTOR BarrelFrozen : SwitchableDecoration
{
	//$Title Frozen Barrel
	//$Category Obstacles
	Game Doom
    damagefactor "Trample", 0.0
	damagefactor "Ice", 0.0
	damagefactor "IceBeam", 0.0
	damagefactor "Frost", 0.0
	damagefactor "Freeze", 0.0
    damagefactor "Kick", 0.4
	damagefactor "LowKick", 0.4
    damagefactor "Melee", 0.4
	damagefactor "Extremepunches", 0.1
	damagefactor "ExplosiveImpact", 0.4
	damagefactor "Fire", 3.5
	damagefactor "GibRemoving", 0.0
	damagefactor "BHFTOnBarrel", 500.0
	damagefactor "Blood", 0.0 damagefactor "BlueBlood", 0.0 damagefactor "GreenBlood", 0.0    damagefactor "Avoid", 0.0
    damagefactor "Shrapnel", 0.0	damagefactor "KillMe", 0.0  damagefactor "TeleportRemover", 0.0
	scale 0.9
	Health 35
	Radius 10
	Height 34
    Mass 200
	DamageType Ice
	-COUNTKILL
	+NOBLOOD
	+FRIENDLY
	+NOICEDEATH
	+LOOKALLAROUND
	+SHOOTABLE
	+GHOST
	+SOLID
    +PUSHABLE
	+SLIDESONWALLS
    +WINDTHRUST
    +TELESTOMP
	+NOBLOCKMONST
	+MISSILEMORE
	+MISSILEEVENMORE
	+EXTREMEDEATH
	-DONTHURTSPECIES
	+DOHARMSPECIES
	+ACTIVATEMCROSS
	+usespecial
	Activation THINGSPEC_Activate | THINGSPEC_ThingTargets | THINGSPEC_NoDeathSpecial
	Speed 0
	MaxTargetRange 200
	DamageFactor "BHFT", 10.0
	Painchance "Blood", 255
	Painchance "BlueBlood", 255
	Painchance "GreenBlood", 255
	PainChance "Kick", 255
	
	
	PainChance "ExtremePunches", 255
	
	PainSound "barrel/pain"
	Obituary "$OB_BARREL"
	PainChance "DontCallTheBaron", 255
	Painchance 255
	States
	{
	
	Spawn:
		BARI M 6
		TNT1 A 0 A_Look
		Goto See

	See:
		BARI M 12 {
				A_Chase;
				if(CountInv("RedBloodSplatterz") == 1 ){
					return state("Pain.Blood");
					}
				if(CountInv("BlueBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
				if(CountInv("GreenBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
					return state("");
			}
		TNT1 A 0 A_ClearTarget
		Loop
	
	Pain.Blood:
	    TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI B 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI B 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI B 0
		"####" B 0 A_SpawnItemEx ("BarrelBloodyFrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME) 
		Stop
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI M 1 A_Pain
		BARI M 0 A_Chase("","")
		TNT1 A 0 ThrustThingZ(0,8,0,1)
        BARI M 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		TNT1 A 0 ThrustThingZ(0,8,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI M 1 A_Pain
		BARI M 0 A_Chase("","")
        BARI M 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		TNT1 A 0 ThrustThingZ(0,10,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	Death:	
	Death.cut:
	Death.saw:
	Death.cutless:
	Death.Nailgun:
	Death.Massacre:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
		
	Death.Plasma:	
	Death.BFG:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("StunBarrelBlast",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
		
	 Active:
        BARI A 1 A_FaceTarget
		TNT1 A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		TNT1 A 0 A_Jump(256,"GiveBarrel")
		Goto See
	
	GiveBarrel:
        TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", false)
		BARI M 1 A_FaceTarget
		TNT1 A 0 A_GiveToTarget("BarrelThrower", 1)
		TNT1 A 0 A_GiveToTarget("GrabbedBarrel", 1)
		TNT1 A 0 A_GiveToTarget("HasIceBarrel", 1)
		TNT1 A 0 A_GiveToTarget("IGrab1", 1)
        BARI M 6
		TNT1 A 0 A_PlaySound("barrel/pain")
        Stop

	Death.Melee:
	Death.Kick:
	Death.ExtremePunches:
	Death.Fatality:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_PlaySound ("IceBreakMedium")
		TNT1 A 0 A_SpawnItemEx ("BarrelDent1Frozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelFrozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrel",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Blackhole:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		BARV IJKLMFGH 2
		
		Stop
		
	Death.Crush:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_PlaySound ("IceBreakLarge")
		TNT1 AAAAA 0 A_CustomMissile ("IceBlood", 5, 0, random (0, 360), 2, random (0, 160), SXF_NOCHECKPOSITION)
		TNT1 AAAAAAA 0 A_CustomMissile ("IceDust", 5, 0, random (0, 360), 2, random (0, 160), SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelCutFrozen : BarrelFrozen
{
	States
	{
	
	Spawn:
		BARI K 4 
		BARI K 4
		TNT1 A 0 A_Look
		Goto See

	See:
		BARI K 12 
			{
				A_Chase;
				if(CountInv("RedBloodSplatterz") == 1 ){
					return state("Pain.Blood");
					}
				if(CountInv("BlueBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
				if(CountInv("GreenBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
					return state("");
			}
		TNT1 A 0 A_ClearTarget
		Loop
	
	Pain.Blood:
	    TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI G 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI G 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI G 0
		"####" G 0 A_SpawnItemEx ("BarrelBloodyCutFrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION | SXF_TRANSFERSPRITEFRAME)
		Stop
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI K 1 A_Pain
		BARI K 0 A_Chase("","")
		TNT1 A 0 ThrustThingZ(0,8,0,1)
        BARI K 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 10, 0, 0)
		TNT1 A 0 ThrustThingZ(0,8,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI K 1 A_Pain
		BARI K 0 A_Chase("","")
        BARI K 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		TNT1 A 0 ThrustThingZ(0,10,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	Death:	
	Death.cut:
	Death.saw:
	Death.cutless:
	Death.Nailgun:
	Death.Massacre:
	Death.Melee:
	Death.Fatality:
	Death.Kick:
	Death.ExtremePunches:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop

	Death.Plasma:	
	Death.BFG:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("StunBarrelBlast",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
		
	 Active:
        BAR1 K 1 A_FaceTarget
		TNT1 A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		TNT1 A 0 A_Jump(256,"GiveBarrel")
		Goto See
	
	GiveBarrel:
        TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", false)
		BARI K 1 A_FaceTarget
		TNT1 A 0 A_GiveToTarget("BarrelThrower", 1)
		TNT1 A 0 A_GiveToTarget("GrabbedBarrel", 1)
		TNT1 A 0 A_GiveToTarget("HasIceBarrel", 1)
		TNT1 A 0 A_GiveToTarget("IGrab2", 1)
        BARI K 6
		TNT1 A 0 A_PlaySound("barrel/pain")
        Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelCutFrozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
				TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelCut",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelHolesFrozen : BarrelCutFrozen
{
	States
	{
	
	Spawn:
		BARI K 4 
		BARI K 4
		TNT1 A 0 A_Look
		Goto See

	See:
		BARI K 12 
			{
				A_Chase;
				if(CountInv("RedBloodSplatterz") == 1 ){
					return state("Pain.Blood");
					}
				if(CountInv("BlueBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
				if(CountInv("GreenBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
					return state("");
			}
		TNT1 A 0 A_ClearTarget
		Loop

	Pain.Blood:
	    TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI B 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI B 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI B 0
		"####" A 0 A_SpawnItemEx ("BarrelBloodyHolesFrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
		Stop
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI K 1 A_Pain
		BARI K 0 A_Chase("","")
		TNT1 A 0 ThrustThingZ(0,8,0,1)
        BARI K 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		TNT1 A 0 ThrustThingZ(0,8,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI K 1 A_Pain
		BARI K 0 A_Chase("","")
        BARI K 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		TNT1 A 0 ThrustThingZ(0,10,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	 Active:
        BARI K 1 A_FaceTarget
		TNT1 A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		TNT1 A 0 A_Jump(256,"GiveBarrel")
		Goto See

	GiveBarrel:
        TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", false)
		BARI K 1 A_FaceTarget
		TNT1 A 0 A_GiveToTarget("BarrelThrower", 1)
		TNT1 A 0 A_GiveToTarget("GrabbedBarrel", 1)
		TNT1 A 0 A_GiveToTarget("HasIceBarrel", 1)
		TNT1 A 0 A_GiveToTarget("IGrab3", 1)
        BARI K 6
		TNT1 A 0 A_PlaySound("barrel/pain")
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		
		Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelHolesFrozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
				TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelHoles",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Blackhole:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		BARV IJKLMFGH 2
		
		Stop
		
	Death.Crush:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_PlaySound ("IceBreakLarge")
		TNT1 AAAAA 0 A_CustomMissile ("IceBlood", 5, 0, random (0, 360), 2, random (0, 160), SXF_NOCHECKPOSITION)
		TNT1 AAAAAAA 0 A_CustomMissile ("IceDust", 5, 0, random (0, 360), 2, random (0, 160), SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelDent1Frozen : BarrelCutFrozen
{
	States
	{
	
	Spawn:
		BARI E 4 
		BARI E 4
		TNT1 A 0 A_Look
		Goto See

	See:
		BARI E 12 
			{
				A_Chase;
				if(CountInv("RedBloodSplatterz") == 1 ){
					return state("Pain.Blood");
					}
				if(CountInv("BlueBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
				if(CountInv("GreenBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
					return state("");
			}
		TNT1 A 0 A_ClearTarget
		Loop
	
	Pain.Blood:
	    TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI G 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI G 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI G 0
		"####" G 0 A_SpawnItemEx ("BarrelBloodyDent1FrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
	    
		Stop
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI E 1 A_Pain
		BARI E 0 A_Chase("","")
		TNT1 A 0 ThrustThingZ(0,8,0,1)
        BARI E 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		TNT1 A 0 ThrustThingZ(0,8,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI E 1 A_Pain
		BARI E 0 A_Chase("","")
        BARI E 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		TNT1 A 0 ThrustThingZ(0,10,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	Death:	
	Death.cut:
	Death.saw:
	Death.cutless:
	Death.Nailgun:
	Death.Massacre:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop

	Death.Plasma:	
	Death.BFG:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("StunBarrelBlast",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
		
	 Active:
        BARI E 1 A_FaceTarget
		TNT1 A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		TNT1 A 0 A_Jump(256,"GiveBarrel")
		Goto See
	
	GiveBarrel:
        TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", false)
		BARI E 1 A_FaceTarget
		TNT1 A 0 A_GiveToTarget("BarrelThrower", 1)
		TNT1 A 0 A_GiveToTarget("GrabbedBarrel", 1)
		TNT1 A 0 A_GiveToTarget("HasIceBarrel", 1)
		TNT1 A 0 A_GiveToTarget("IGrab4", 1)
        BAR1 E 6
		TNT1 A 0 A_PlaySound("barrel/pain")
        Stop
		
	Death.Melee:
	Death.Fatality:
	Death.Kick:
	Death.ExtremePunches:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_PlaySound ("IceBreakMedium")
		TNT1 A 0 A_SpawnItemEx ("BarrelDent2Frozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelDent1Frozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelDent1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelDent2Frozen : BarrelCutFrozen
{
	States
	{
	
	Spawn:
		BARI F 4 
		BARI F 4
		TNT1 A 0 A_Look
		Goto See

	See:
		BARI F 12 {
			A_Chase;
			if(CountInv("RedBloodSplatterz") == 1 ){
					return state("Pain.Blood");
					}
				if(CountInv("BlueBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
				if(CountInv("GreenBloodSplatterz") == 1){
					return state("Pain.Blood");
					}
					return state("");
			}
		TNT1 A 0 A_ClearTarget
		Loop
	
	Pain.Blood:
	    TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI G 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI G 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI G 0
		"####" A 0 A_SpawnItemEx ("BarrelBloodyDent2FrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
	    
		Stop
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI F 1 A_Pain
		BARI F 0 A_Chase("","")
		TNT1 A 0 ThrustThingZ(0,8,0,1)
        BARI F 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		TNT1 A 0 ThrustThingZ(0,8,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    TNT1 A 0 A_Changeflag("FRIENDLY", 0)
	    BARI F 1 A_Pain
		BARI F 0 A_Chase("","")
        BARI F 1 A_FaceTarget
		TNT1 A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		TNT1 A 0 ThrustThingZ(0,10,0,1)
		TNT1 A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	 Active:
        BARI F 1 A_FaceTarget
		TNT1 A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		TNT1 A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		TNT1 A 0 A_Jump(256,"GiveBarrel")
		Goto See
		
	GiveBarrel:
        TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("SHOOTABLE", false)
		BARI F 1 A_FaceTarget
		TNT1 A 0 A_GiveToTarget("BarrelThrower", 1)
		TNT1 A 0 A_GiveToTarget("GrabbedBarrel", 1)
		TNT1 A 0 A_GiveToTarget("HasIceBarrel", 1)
		TNT1 A 0 A_GiveToTarget("IGrab5", 1)
        BAR1 F 6
		TNT1 A 0 A_PlaySound("barrel/pain")
        Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelDent2Frozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelDent2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelBloodyFrozen : BarrelFrozen// SwitchableDecoration
{
	States
	{
	
	Spawn:
		BARI B 4 
		BARI B 0
		"####" A 0 A_Look
		Goto See

	See:
		"####" B 12 
		"####" A 0 A_ClearTarget
		"####" B 0 A_JumpIfInventory("GreenBloodSplatterz",1,"LoadGreen")
		"####" B 0 A_JumpIfInventory("BlueBloodSplatterz",1,"LoadBlue")
		"####" B 0 A_JumpIfInventory("RedBloodSplatterz",1,"LoadRed")
		Loop
	
	LoadGreen:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("BlueBloodSplatterz",1);
			}
		BRGI B 0
		GOTO See
	
	LoadBlue:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BRBI B 0
		GOTO See
		
	LoadRed:
		TNT1 A 0 {
			A_TAkeInventory("BlueBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BARI B 0
		GOTO See
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" B 1 A_Pain
		"####" I 0 A_Chase("","")
		"####" A 0 ThrustThingZ(0,8,0,1)
        "####" B 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		"####" A 0 ThrustThingZ(0,8,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" B 1 A_Pain
		"####" B 0 A_Chase("","")
        "####" B 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		"####" A 0 ThrustThingZ(0,10,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
	
	 Active:
        "####" B 1 A_FaceTarget
		"####" A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		"####" A 0 A_Jump(256,"GiveBarrel")
		Goto See
		
	GiveBarrel:
        "####" A 0 A_NoBlocking
		"####" A 0 A_ChangeFlag("SHOOTABLE", false)
		"####" B 1 A_FaceTarget
		"####" A 0 A_GiveToTarget("BarrelThrower", 1)
		"####" A 0 A_GiveToTarget("GrabbedBarrel", 1)
		"####" A 0 A_GiveToTarget("HasIceBarrel", 1)
		"####" A 0 A_GiveToTarget("IGrab6", 1)
        "####" B 6
		"####" A 0 A_PlaySound("barrel/pain")
        Stop

	Death.Melee:
	Death.Fatality:
	Death.Kick:
	Death.ExtremePunches:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_PlaySound ("IceBreakMedium")
		BRGI G 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI G 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI G 0
		"####" G 0 A_SpawnItemEx ("BarrelBloodyDent1FrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
		
		Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI B 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI B 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI B 0
		"####" B 0 A_SpawnItemEx ("BarrelBloodyFrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelBloody",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelBloodyCutFrozen : BarrelBloodyFrozen
{

	States
	{
	
	Spawn:
		BARI L 4 
		BARI L 0
		"####" A 0 A_Look
		Goto See

	See:
		"####" L 12 
		"####" A 0 A_ClearTarget
		"####" B 0 A_JumpIfInventory("GreenBloodSplatterz",1,"LoadGreen")
		"####" B 0 A_JumpIfInventory("BlueBloodSplatterz",1,"LoadBlue")
		"####" B 0 A_JumpIfInventory("RedBloodSplatterz",1,"LoadRed")
		Loop
	
	LoadGreen:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("BlueBloodSplatterz",1);
			}
		BRGI B 0
		GOTO See
	
	LoadBlue:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BRBI B 0
		GOTO See
		
	LoadRed:
		TNT1 A 0 {
			A_TAkeInventory("BlueBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BARI B 0
		GOTO See
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" L 1 A_Pain
		"####" L 0 A_Chase("","")
		"####" A 0 ThrustThingZ(0,8,0,1)
        "####" L 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		"####" A 0 ThrustThingZ(0,8,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" L 1 A_Pain
		"####" L 0 A_Chase("","")
        "####" L 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		"####" A 0 ThrustThingZ(0,10,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	 Active:
        "####" L 1 A_FaceTarget
		"####" A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		"####" A 0 A_Jump(256,"GiveBarrel")
		Goto See
		
	GiveBarrel:
        "####" A 0 A_NoBlocking
		"####" A 0 A_ChangeFlag("SHOOTABLE", false)
		"####" L 1 A_FaceTarget
		"####" A 0 A_GiveToTarget("BarrelThrower", 1)
		"####" A 0 A_GiveToTarget("GrabbedBarrel", 1)
		"####" A 0 A_GiveToTarget("HasIceBarrel", 1)
		"####" A 0 A_GiveToTarget("IGrab7", 1)
        "####" L 6
		"####" A 0 A_PlaySound("barrel/pain")
        Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI G 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI G 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI G 0
		"####" G 0 A_SpawnItemEx ("BarrelBloodyCutFrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION | SXF_TRANSFERSPRITEFRAME)
		
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelBloodyCut",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelBloodyHolesFrozen : BarrelBloodyFrozen
{
	States
	{
	
	Spawn:
		BARI L 4 
		BARI L 0
		"####" A 0 A_Look
		Goto See

	See:
		"####" L 12 
		"####" A 0 A_ClearTarget
		Loop

    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" L 1 A_Pain
		"####" L 0 A_Chase("","")
		"####" A 0 ThrustThingZ(0,8,0,1)
        "####" L 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		"####" A 0 ThrustThingZ(0,8,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" L 1 A_Pain
		"####" L 0 A_Chase("","")
        "####" L 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		"####" A 0 ThrustThingZ(0,10,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	 Active:
        "####" L 1 A_FaceTarget
		"####" A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		"####" A 0 A_Jump(256,"GiveBarrel")
		Goto See
	
	GiveBarrel:
        "####" A 0 A_NoBlocking
		"####" A 0 A_ChangeFlag("SHOOTABLE", false)
		"####" L 1 A_FaceTarget
		"####" A 0 A_GiveToTarget("BarrelThrower", 1)
		"####" A 0 A_GiveToTarget("GrabbedBarrel", 1)
		"####" A 0 A_GiveToTarget("HasIceBarrel", 1)
		"####" A 0 A_GiveToTarget("IGrab8", 1)
        "####" L 6
		"####" A 0 A_PlaySound("barrel/pain")
		"####" A 0 A_NoBlocking
		"####" A 0 A_ChangeFlag("THRUACTORS", 1)
		
		Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelBloodyHolesFrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TransferSpriteFrame)
		
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		FBRG A 0 A_JumpIfInventory("GreenBloodSplatterz", 1, 3)
		FBRB A 0 A_JumpIfInventory("BlueBloodSplatterz", 1, 2)
		FBAR A 0
		"####" F 0 A_SpawnItemEx ("FlameBarrelBloodyHolesLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
		
		Stop
		
	}
}


ACTOR BarrelBloodyDent1Frozen : BarrelBloodyFrozen
{
	
	States
	{
	
	Spawn:
		BARI G 4 
		BARI G 4
		"####" A 0 A_Look
		Goto See

	See:
		"####" G 12 
		"####" A 0 A_ClearTarget
		"####" B 0 A_JumpIfInventory("GreenBloodSplatterz",1,"LoadGreen")
		"####" B 0 A_JumpIfInventory("BlueBloodSplatterz",1,"LoadBlue")
		"####" B 0 A_JumpIfInventory("RedBloodSplatterz",1,"LoadRed")
		Loop
	
	LoadGreen:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("BlueBloodSplatterz",1);
			}
		BRGI B 0
		GOTO See
	
	LoadBlue:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BRBI B 0
		GOTO See
		
	LoadRed:
		TNT1 A 0 {
			A_TAkeInventory("BlueBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BARI B 0
		GOTO See

    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" G 1 A_Pain
		"####" G  0 A_Chase("","")
		"####" A 0 ThrustThingZ(0,8,0,1)
        "####" G 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		"####" A 0 ThrustThingZ(0,8,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" G 1 A_Pain
		"####" G  0 A_Chase("","")
        "####" G 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		"####" A 0 ThrustThingZ(0,10,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	Death:	
	Death.cut:
	Death.saw:
	Death.cutless:
	Death.Nailgun:
	Death.Massacre:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop

		
	Death.Plasma:	
	Death.BFG:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("StunBarrelBlast",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
		
	 Active:
        "####" G 1 A_FaceTarget
		"####" A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		"####" A 0 A_Jump(256,"GiveBarrel")
		Goto See

	GiveBarrel:
        "####" A 0 A_NoBlocking
		"####" A 0 A_ChangeFlag("SHOOTABLE", false)
		"####" G 1 A_FaceTarget
		"####" A 0 A_GiveToTarget("BarrelThrower", 1)
		"####" A 0 A_GiveToTarget("GrabbedBarrel", 1)
		"####" A 0 A_GiveToTarget("HasIceBarrel", 1)
		"####" A 0 A_GiveToTarget("IGrab9", 1)
        "####" E 6
		"####" A 0 A_PlaySound("barrel/pain")
        Stop
		
	Death.Melee:
	Death.Fatality:
	Death.Kick:
	Death.ExtremePunches:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_PlaySound ("IceBreakMedium")
		TNT1 A 0 A_SpawnItemEx ("BarrelBloodyDent2Frozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		BRGI G 0 A_JumpIfInventory("GreenBloodSplatterz",1,3)
		BRBI G 0 A_JumpIfInventory("BlueBloodSplatterz",1,2)
		BARI G 0
		"####" G 0 A_SpawnItemEx ("BarrelBloodyDent1FrozenLoad",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERSPRITEFRAME)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelBloodyDent1",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	}
}

ACTOR BarrelBloodyDent2Frozen : BarrelBloodyFrozen
{
	States
	{
	
	Spawn:
		BARI B 0
		"####" H 4 
		"####" H 4
		"####" A 0 A_Look
		Goto See

	See:
		"####" H 12 
		"####" A 0 A_ClearTarget
		"####" B 0 A_JumpIfInventory("GreenBloodSplatterz",1,"LoadGreen")
		"####" B 0 A_JumpIfInventory("BlueBloodSplatterz",1,"LoadBlue")
		"####" B 0 A_JumpIfInventory("RedBloodSplatterz",1,"LoadRed")
		Loop
	
	LoadGreen:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("BlueBloodSplatterz",1);
			}
		BRGI B 0
		GOTO See
	
	LoadBlue:
		TNT1 A 0 {
			A_TAkeInventory("RedBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BRBI B 0
		GOTO See
		
	LoadRed:
		TNT1 A 0 {
			A_TAkeInventory("BlueBloodSplatterz",1);
			A_TAkeInventory("GreenBloodSplatterz",1);
			}
		BARI B 0
		GOTO See
		
    Pain.Kick:
	Pain.SuperKick:
	Pain.ExtremePunches:
	Pain.SuperPunch:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" H 1 A_Pain
		"####" H 0 A_Chase("","")
		"####" A 0 ThrustThingZ(0,8,0,1)
        "####" H 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 20, 0, 0)
		"####" A 0 ThrustThingZ(0,8,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See

	Pain.Melee:
	Pain.Fatality:
	    "####" A 0 A_Changeflag("FRIENDLY", 0)
	    "####" H 1 A_Pain
		"####" H 0 A_Chase("","")
        "####" H 1 A_FaceTarget
		"####" A 0 ThrustThing(angle*256/360+128, 5, 0, 0)
		"####" A 0 ThrustThingZ(0,10,0,1)
		"####" A 0 A_Changeflag("FRIENDLY", 1)
        Goto See
		
	Death:	
	Death.cut:
	Death.saw:
	Death.cutless:
	Death.Nailgun:
	Death.Massacre:
	Death.Melee:
	Death.Fatality:
	Death.Kick:
	Death.ExtremePunches:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop

		
	Death.Plasma:	
	Death.BFG:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItemEx ("StunBarrelBlast",0,0,30,0,0,0,0,SXF_NOCHECKPOSITION,0)
		Stop
		
	 Active:	
        "####" H 1 A_FaceTarget
		"####" A 0 A_JumpIfInTargetInventory("HasBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasIceBarrel",1, "See")
		"####" A 0 A_JumpIfInTargetInventory("HasBurningBarrel",1, "See")
		"####" A 0 A_Jump(256,"GiveBarrel")
		Goto See

	GiveBarrel:
        "####" A 0 A_NoBlocking
		"####" A 0 A_ChangeFlag("SHOOTABLE", false)
		"####" H 1 A_FaceTarget
		"####" A 0 A_GiveToTarget("BarrelThrower", 1)
		"####" A 0 A_GiveToTarget("GrabbedBarrel", 1)
		"####" A 0 A_GiveToTarget("HasIceBarrel", 1)
		"####" A 0 A_GiveToTarget("IGrab5", 1)
        "####" H 6
		"####" A 0 A_PlaySound("barrel/pain")
        Stop
		
	Death.Ice:
	Death.Freeze:
	Death.Frost:
	Death.Icebeam:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_NoBlocking
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("BarrelBloodyDent2Frozen",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		
		Stop
		
	Death.Desintigrate:
		TNT1 A 0 A_Changeflag ("Shootable", false)
        TNT1 A 0 A_SpawnItemEx ("IceBarrelBlast",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
		TNT1 A 0 A_SpawnItem("BFGAltShockWave",0,0)
		TNT1 A 0 A_SpawnItem("ACIDFOG", 0, 0)
		Stop
		
	Death.Fire:
	Death.Burn:
	Death.Flames:
		TNT1 A 0 A_Changeflag ("Shootable", false)
		TNT1 A 0 A_PlaySound ("IceMelt")
		TNT1 A 0 A_NoBlocking
		TNT1 AAAAAAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke", 0, 0, 0, random(10, 30)*0.1, 0, random(0, 10)*0.1, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 AAAAA 0 Bright A_SpawnItemEx("CryoSmoke3", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)		
		TNT1 AAAAAAA 0 Bright A_SpawnItemEx("CryoSmoke2", 0, 0, 0, random(10, 30)*0.04, 0, random(0, 10)*0.04, random(1,360), SXF_NOCHECKPOSITION,64)
		TNT1 A 0 Bright A_SpawnItemEx("IceExplosionImpact", 0, 0, 0, 0, 0, 0, random(1,360), SXF_NOCHECKPOSITION)
		TNT1 A 0 A_ChangeFlag("THRUACTORS", 1)
		TNT1 A 0 A_SpawnItemEx ("FlameBarrelBloodyDent2",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION)
		Stop
		
	}
	
}


///////////////////////////////////////////////////////
//		BLOODY FROZEN BARREL SPRITE LOADING  	//
//////////////////////////////////////////////////////

// See NukageBarrel.dec for more info

ACTOR BarrelBloodyFrozenLoad : BarrelBloodyFrozen// SwitchableDecoration
{
	States
	{
	
	Spawn:
		"####" B 4 
		"####" B 4
		"####" A 0 A_Look
		Goto See
	}
}


ACTOR BarrelBloodyDent1FrozenLoad : BarrelBloodyDent1Frozen
{
	
	States
	{
	
	Spawn:
		"####" G 4 
		"####" G 4
		"####" A 0 A_Look
		Goto See
	}
}

ACTOR BarrelBloodyDent2FrozenLoad : BarrelBloodyDent2Frozen
{
	
	States
	{
	
	Spawn:
		"####" G 4 
		"####" G 4
		"####" A 0 A_Look
		Goto See
	}
}

ACTOR BarrelBloodyCutFrozenLoad : BarrelBloodyCutFrozen
{

	States
	{
	
	Spawn:
		"####" L 4 
		"####" L 4
		"####" A 0 A_Look
		Goto See
	}
}

ACTOR BarrelBloodyHolesFrozenLoad : BarrelBloodyHolesFrozen
{
	States
	{
	
	Spawn:
		"####" L 4 
		"####" A 0 A_Look
		Goto See
	}
}
