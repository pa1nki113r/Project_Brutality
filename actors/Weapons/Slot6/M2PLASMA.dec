// M2 Plasma Rifle Pickup
ACTOR M2Plasma : CustomInventory //12000
{
//$Category Weapons
	Inventory.PickupMessage "You got the M2 plasma rifle! (slot 6)"
	Inventory.PickupSound "PLSDRAW"
	States
	{
	Spawn:
		M2PR A 2
		Loop
	Pickup:
        TNT1 A 0 A_GiveInventory ("M2PlasmaRifle")
		Stop
	}
}

Actor M2PlasmaUnloaded : Inventory {}

Actor RespectM2PlasmaGun : Inventory
{
inventory.maxamount 1
}

Actor LightningGunMode : Inventory
{
inventory.maxamount 1
}

Actor HasLightningGunUpgrade : Inventory
{
inventory.maxamount 1
}

Actor M2Upgrade: Custominventory
{
//$Category Ammunition
	Game Doom
	SpawnID 9370
	Height 24
	+INVENTORY.ALWAYSPICKUP
	+COUNTITEM
	Inventory.Pickupsound "PLSM2UP"
	Inventory.PickupMessage "You got the M2 Lightning Mode Upgrade!!"
	States
	{
	Spawn:
		M2PR BCDEFEDC 2 BRIGHT Light("WeaponUpgradeSpawner")
		Loop
	
    Pickup:
      TNT1 A 0 A_GiveInventory ("M2PlasmaRifle")
      TNT1 A 0 A_GiveInventory ("DualM2PlasmaRifles", 1)
      TNT1 A 0 A_GiveInventory ("HasTwoM2PlasmaRifles", 2)
	  TNT1 A 0 A_GiveInventory("HasLightningGunUpgrade", 1)
      Stop
	}
}

Actor M2PlasmaAmmo : Ammo
{
inventory.maxamount 50
Inventory.Icon "M2PRA0"
}
Actor PlasmaSoundCounter : Inventory
{
	Inventory.MaxAmount 2
}
// --------------------------------------------------------------------------
// M2 Plasma rifle
// --------------------------------------------------------------------------

ACTOR M2PlasmaRifle : PB_Weapon //12222
{
	Weapon.BobRangeX 0.3
	Weapon.BobRangeY 0.5
	Weapon.BobStyle InverseSmooth
	Weapon.BobSpeed 2.4
	Weapon.SelectionOrder 100
	Weapon.AmmoUse1 0
	Weapon.AmmoGive1 50
	Weapon.AmmoUse2 0
	Weapon.AmmoGive2 0
    Inventory.PickupSound "PLSDRAW"
	Weapon.AmmoType1 "Cell"
	Weapon.AmmoType2 "M2PlasmaAmmo"
   	+WEAPON.NOAUTOAIM
	+WEAPON.NOAUTOFIRE
	+FLOORCLIP
	+DONTGIB
	Inventory.PickupMessage "You got the UAC-M2 Heavy Plasma Rifle! (Slot 6)"
	Tag "UAC-M2 Plasma Rifle"
	Weapon.SisterWeapon DualM2PlasmaRifles
	PB_WeaponBase.UnloaderToken "M2PlasmaUnloaded"
	States
	{
	Steady:
	TNT1 A 1
	Goto Ready
	
	Ready:
		TNT1 A 0 A_JumpIfInventory("RespectM2PlasmaGun", 1,"SelectAnimation")
	WeaponRespect:
		TNT1 A 0 {
			A_SetCrosshair(5);
		//	A_GiveInventory("RespectM2PlasmaGun");
			A_Giveinventory("PB_LockScreenTilt",1);
			A_PlaySoundEx("Ironsights", "Auto");
		}
		M200 ABCDDDDDD 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaySoundEx("weapons/carbine/fancybutton", "Auto")
		M200 EEFFGGHHIIJJKKLLMMNN 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M200 NN 1 A_DoPBWeaponAction
		M202 AA 1 A_DoPBWeaponAction
		M200 N 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M200 N 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M200 N 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M200 NN 1 A_DoPBWeaponAction
		M202 AA 1 A_DoPBWeaponAction
		M200 N 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M200 N 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		M200 N 1 A_DoPBWeaponAction
		M202 A 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaySoundEx("weapons/m2plasma/screenon", "Auto")
		M200 NNNNNNNN 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaySoundEx("weapons/carbine/fancybutton", "Auto")
		M200 OPQRSTUVWXYYYYYYYY 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaySoundEx("weapons/plasma/cellout", "Auto")
		M200 Z 1 A_DoPBWeaponAction
		M201 ABCD 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaySoundEx("Weapons/CellEject", "Auto")
		TNT1 AAA 0 A_FireCustomMissile("GunFireSmoke", -40, 0, -6, -9, 0, 0)
		M201 EFGHIJKLM 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaySoundEx("weapons/plasma/cellin", "Auto")
		M201 NOPQQQRSTUVWWWWWW 1 A_DoPBWeaponAction
		M200 SRQP 1 A_DoPBWeaponAction
		M201 XYZ 1 A_DoPBWeaponAction
		Goto Ready3
	
	Ready3:
		TNT1 A 0 {
			A_TakeInventory("PB_LockScreenTilt",1);
			A_SetCrosshair(0);
			}
	ReallyReady3:
	TNT1 A 0 A_JumpIfInventory("LightningGunMode", 1,"Ready2")
	TNT1 A 0 A_GiveInventory("PlasmaSoundCounter",2)
	SpriteInit:
	TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade",1,1)
	Goto InitNormalSprite
	InitLightningSprite:
	ZR2G A 0
	Goto ActuallyReady3
	InitNormalSprite:
	M210 A 0
	Goto ActuallyReady3
	ActuallyReady3:
	"####" AABBCCDDEEFFGGHHIIGGHHFFEEDDCCBB 1 
			{
				A_GiveInventory("PlasmaSoundCounter",1);
				if (CountInv("PlasmaSoundCounter") >= 2)
				{
					A_PlaySound("PLSM2LP", 6,0.1,1);
					A_TakeInventory("PlasmaSoundCounter",2);
				}
				return A_DoPBWeaponAction(WRF_ALLOWRELOAD, CheckUnloaded("M2PlasmaUnloaded"));
			}
	Goto ReallyReady3
	
	Ready2:
	TNT1 A 0 A_PlaySound("PLSMLG2")
	PR1G ABCDEF 1
	TNT1 AA 0
	ReallyReady2:
	PR1G GHIJIH 1 A_DoPBWeaponAction
	TNT1 A 0 A_PlaySound("LGHUM1", 6,1,1)
	Loop
		
	SelectAnimation:
	TNT1 A 0 A_PlaySound("PLSDRAW")
	M230 ABCDE 1 
	Goto ReallyReady3
	
	
	WeaponSpecial:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_Takeinventory("GoWeaponSpecialAbility",1)
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"SwitchToLightningMode")	
	DualWield:
		TNT1 A 0 A_JumpIfInventory("DualM2PlasmaChecker", 3,"SwitchToDualWield")
		TNT1 A 0 A_Print("You need two M2 Plasma rifles to dual wield!")
		TNT1 A 0 A_Takeinventory("GoWeaponSpecialAbility",1)
		Goto Ready+9
		
	SwitchToLightningMode:
		TNT1 A 0 A_JumpIfInventory("LightningGunMode", 1,"SwitchToRegularMode")
		TNT1 A 0 {
			A_Giveinventory("LightningGunMode",1);
			A_PlaySound("PLSMLG2");
			}
		PR1G ABCDEF 1
		PR1G GHIJ 1
		Goto Ready3
		
	SwitchToRegularMode:
		TNT1 A 0 A_Takeinventory("LightningGunMode",1)
		TNT1 A 0 A_PlaySound("PLSMLG1")
		PR1G GHIJ 1
		PR1G FEDCBA 1
		Goto Ready3
	
		
	SwitchToDualWield:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_SelectWeapon("DualM2PlasmaRifles")
		Goto Select
		
	DontNeedToReload:
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1, 2)
		Goto ready+8
		TNT1 AAAAA 0
		Goto Ready2+10
	
	Deselect:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 {
			A_Takeinventory("M2PlasmaUnloaded",1);
			A_Takeinventory("Unloading",1);
			A_TakeInventory("M2Selected",1);
			A_TakeInventory("PlasmaGunSelected",1);
			A_TakeInventory("HasPlasmaWeapon",1);
			}
		TNT1 A 0 A_JumpIfInventory("GotMeatShield", 1, "GrabEnemy")
		M230 EDCBA 1 
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_Lower
		Wait	
	
	Select:
	TNT1 A 0 A_Overlay(-10, "FirstPersonLegsStand")
	TNT1 A 0 A_Takeinventory("M2PlasmaUnloaded",1)
	TNT1 A 0 A_Takeinventory("Unloading",1)
	TNT1 A 0 A_TakeInventory("RifleSelected",1)
	TNT1 A 0 A_TakeInventory("CarbineSelected",1)
	TNT1 A 0 A_TakeInventory("FistsSelected",1)
	TNT1 A 0 A_TakeInventory("SawSelected",1)
	TNT1 A 0 A_TakeInventory("ShotgunSelected",1)
	TNT1 A 0 A_TakeInventory("SSGSelected",1)
	TNT1 A 0 A_TakeInventory("MinigunSelected",1)
	TNT1 A 0 A_TakeInventory("NewchaingunSelected",1)
	TNT1 A 0 A_TakeInventory("RocketLauncherSelected",1)
    TNT1 A 0 A_TakeInventory("GrenadeLauncherSelected",1)
	TNT1 A 0 A_TakeInventory("BFGSelected",1)
	TNT1 A 0 A_TakeInventory("RailGunSelected",1)
	TNT1 A 0 A_Giveinventory("M2selected",1)
	TNT1 A 0 A_Takeinventory("HellrifleSelected",1)
	TNT1 A 0 A_Takeinventory("FreezerSelected",1)
	TNT1 A 0 A_TakeInventory("SubMachineGunSelected",1)
	TNT1 A 0 A_TakeInventory("RevenantLauncherSelected",1)
	TNT1 A 0 A_TakeInventory("LostSoulSelected",1)
	TNT1 A 0 A_TakeInventory("FlameCannonSelected",1)
	TNT1 A 0 A_TakeInventory("HasBarrel",1)
	//TNT1 A 0 A_JumpIfInventory("IsPlayingAsPurist", 1, 4)
	TNT1 A 0 A_GiveInventory("HasPlasmaWeapon",1)
	//TNT1 A 0 A_GiveInventory("PlasmaGunSelected",1)
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_Raise
		TNT1 AAAAAAAA 1 A_Raise
		Wait
	GoToPurist:
		TNT1 AAA 0
		TNT1 A 0 A_Print("Classic v20 Weapons Only!")
		TNT1 A 0 A_SelectWeapon("Plasma_gun")
		TNT1 AAAAAAAAAAAAAAAAAA 0 A_Raise
		TNT1 AAAAAAAA 1 A_Raise
		Wait
		
	Fire:
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_WeaponOffset(0,32)
        TNT1 A 0 A_JumpIfInventory("Reloading",1,"Reload")
        TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",2,2)
		Goto Reload
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1,"FireLightningGun1")
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"FireUpgraded")	
		M211 A 1 BRIGHT {
			A_FireCustomMissile("HeavyPlasmaBall",0,1,0,-1);
			A_PlaySoundEx("m2plasma", "Weapon");
			A_Zoomfactor(0.98);
			A_FireCustomMissile("GunFireSmoke", 0, 0, 0, 0, 0, 0);
			A_FireCustomMissile("BlueFlareSpawn",-5,0,0,0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			if (CountInv("PowerStrength") >= 1 ) {

				A_SetPitch(pitch-0.42, SPF_INTERPOLATE);
				A_SetAngle(angle+0.13, SPF_INTERPOLATE);
				}
			else {
				A_SetPitch(pitch-0.84, SPF_INTERPOLATE);
				A_SetAngle(angle+0.26, SPF_INTERPOLATE);
				}
		}	
		
		M211 B 1 BRIGHT {
			A_FireCustomMissile("AltHeavyPlasmaBall",0,1,0, -1);
			A_Zoomfactor(0.99);
			A_FireCustomMissile("GunFireSmoke", 0, 0, 0, 0, 0, 0);
			A_FireCustomMissile("BlueFlareSpawn",-5,0,0,0);
			if (CountInv("PowerStrength") >= 1 ) {

				A_SetPitch(pitch-0.42, SPF_INTERPOLATE);
				A_SetAngle(angle+0.13, SPF_INTERPOLATE);
				}
			else {
				A_SetPitch(pitch-0.84, SPF_INTERPOLATE);
				A_SetAngle(angle+0.26, SPF_INTERPOLATE);
				}
			}
		M211 C 1 BRIGHT {
			A_FireCustomMissile("ShakeYourAss", 0, 0, 0, 0);
			A_Zoomfactor(1.0);
			if (CountInv("PowerStrength") >= 1 ) {

				A_SetPitch(pitch-0.42, SPF_INTERPOLATE);
				A_SetAngle(angle+0.13, SPF_INTERPOLATE);
				}
			else {
				A_SetPitch(pitch-0.84, SPF_INTERPOLATE);
				A_SetAngle(angle+0.26, SPF_INTERPOLATE);
				}
			}
		M211 DE 1 A_DoPBWeaponAction(WRF_ALLOWRELOAD)
		Goto Ready3
		
	FireUpgraded:
        TNT1 A 0 A_PlaySound("m2plasma")
		TNT1 A 0 A_Zoomfactor(0.98)
		PR2F B 1 BRIGHT A_FireCustomMissile("HeavyPlasmaBall",0,1,0,-1)
		TNT1 A 0 A_FireCustomMissile("BlueFlareSpawn",-5,0,0,0)
		TNT1 A 0 A_Zoomfactor(0.97)
		PR2F B 1 BRIGHT A_FireCustomMissile("AltHeavyPlasmaBall",0,1,0, -1)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAss", 0, 0, 0, 0)
		TNT1 A 0 A_FireCustomMissile("GunFireSmoke", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 A_Zoomfactor(0.96)
		PR2F C 1 BRIGHT
		TNT1 A 0 A_Zoomfactor(1.0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR2F DEF 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Goto Ready3
		
	FireLightningGun1:
		TNT1 A 0 A_PlaySound("LGFire", 1, 1)
		TNT1 A 0 A_PlaySound("LGLoop", 7, 1, 1)
		TNT1 A 0 A_Zoomfactor(0.98)
		LightningGunLoop:
		TNT1 A 0 A_TakeInventory("M2PlasmaAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("LightningGunProjectile", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAss", 0, 0, 0, 0)
		TNT1 A 0 //A_RailAttack(1, 0, 0, "none", "blue", RGF_NOPIERCING | RGF_SILENT | RGF_CENTERZ | RGF_FULLBRIGHT, 0, "hitpuff", 0, 0, 1024, 1)
		PR1F A 1 BRIGHT A_SetAngle(frandom(0.3, -0.3) + angle)
		TNT1 A 0 A_FireCustomMissile("LightningGunProjectile", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 //A_RailAttack(1, 0, 0, "none", "blue", RGF_NOPIERCING | RGF_SILENT | RGF_CENTERZ | RGF_FULLBRIGHT, 0, "hitpuff", 0, 0, 1024, 1)
		PR1F B 1 BRIGHT A_SetAngle(frandom(0.3, -0.3) + angle)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAss", 0, 0, 0, 0)
		PR1F A 1 BRIGHT A_SetAngle(frandom(0.3, -0.3) + angle)
		TNT1 A 0 A_FireCustomMissile("LightningGunProjectile", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 //A_RailAttack(1, 0, 0, "none", "blue", RGF_NOPIERCING | RGF_SILENT | RGF_CENTERZ | RGF_FULLBRIGHT, 0, "hitpuff", 0, 0, 1024, 1)
		PR1F C 1 BRIGHT A_SetAngle(frandom(0.3, -0.3) + angle)
		TNT1 A 0 A_FireCustomMissile("LightningGunProjectile", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 //A_RailAttack(1, 0, 0, "none", "blue", RGF_NOPIERCING | RGF_SILENT | RGF_CENTERZ | RGF_FULLBRIGHT, 0, "hitpuff", 0, 0, 1024, 1)
		PR1F A 1 BRIGHT A_SetAngle(frandom(0.3, -0.3) + angle)
        TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",1,1)
		Goto Reload
		PR1F B 1 BRIGHT A_ReFire("LightningGunLoop")
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_PlaySound("LGEnd1", 9, 1)
		TNT1 A 0 A_Zoomfactor(1.0)
		PR1F DEF 1 BRIGHT A_WeaponReady(WRF_ALLOWRELOAD)
		TNT1 A 0 A_PlaySound("LGEnd2", 8, 1)
		PR1F G 1 A_WeaponReady(WRF_ALLOWRELOAD)
		Goto Ready2
		
	FireStunBomb:
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",10,1)
        Goto Reload
		TNT1 A 0 A_Playsound("PZPCHR2")
		PR1F XYZABACABACABAC 1 BRIGHT A_FireCustomMissile("ElectroBlastTrail2", 0, 0, 0, 0)
		TNT1 A 0 A_Playsound("STNBOMB")
		TNT1 A 0 A_TakeInventory("M2PlasmaAmmo", 10)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_FireCustomMissile("StunBomb", 0, 0, 0, 0, 0, 0)
		TNT1 A 0 A_Zoomfactor(0.96)
		PR1F DDEEFF 1 BRIGHT
		TNT1 A 0 A_Zoomfactor(1.0)
		Goto Ready2+10
		
		
	AltFire:
		TNT1 A 0 A_WeaponOffset(0,32)
		TNT1 A 0 A_StopSound(6)
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1,"FireStunBomb")
		TNT1 A 0 A_Jump(256, "LeftToRight", "RightToLeft")
		goto LeftToRight
	
	
	LeftToRight:
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",10,1)
        Goto Reload
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradedLeftToRight")	
		PRIF A 1 A_Zoomfactor(.98)
		PR3L D 1 A_Zoomfactor(.96)
		PR3L A 1 A_Zoomfactor(.94)
		TNT1 A 0 A_PlaySound("plamersh",1, 1, 1)
		TNT1 A 0 A_PlaySound("PLSTHRW",3)
		PR3L B 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(27,33),0,8);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
		}
		PR3L C 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(20,27),0,8)
		PR3L D 1 A_PlaySound("PLSTHRW",4)
		PR3L E 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(12,18),0,4);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L F 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(5,10),0,4)
		PR3L G 1 A_PlaySound("PLSTHRW",5)
		PR3L H 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(-3,3));
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L I 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-4,7))
		PR3L J 1 A_PlaySound("PLSTHRW",6)
		PR3L K 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(-12,-18),0,-4);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L L 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-20,-27),0,-4)
		PR3L M 1 A_PlaySound("PLSTHRW",7)
		PR3L N 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(-27,-33),0,-8);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L O 1 BRIGHT	A_StopSound(1)
		TNT1 A 0 A_PlaySound("plameren",2)
		PR3L M 1 A_Zoomfactor(.96)
		PR3L J 1 A_Zoomfactor(.98)
		PR3L G 1 A_Zoomfactor(1.0)
		Goto ready3
		
		
		UpgradedLeftToRight:
		PR2F A 1 A_Zoomfactor(.98)
		PR4L D 1 A_Zoomfactor(.96)
		PR4L A 1 A_Zoomfactor(.94)
		TNT1 A 0 A_PlaySound("plamersh",1, 1, 1)
		TNT1 A 0 A_PlaySound("PLSTHRW",3)
		PR4L B 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(27,33),0,8)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L C 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(20,27),0,8)
		PR4L D 1
		TNT1 A 0 A_PlaySound("PLSTHRW",4)
		PR4L E 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(12,18),0,4)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L F 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(5,10),0,4)
		PR4L G 1
		TNT1 A 0 A_PlaySound("PLSTHRW",5)
		PR4L H 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-3,3))
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L I 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-4,7))
		PR4L J 1
		TNT1 A 0 A_PlaySound("PLSTHRW",6)
		PR4L K 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-12,-18),0,-4)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L L 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-20,-27),0,-4)
		PR4L M 1
		TNT1 A 0 A_PlaySound("PLSTHRW",7)
		PR4L N 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-27,-33),0,-8)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L O 1 BRIGHT	A_StopSound(1)
		TNT1 A 0 A_PlaySound("plameren",2)
		PR4L M 1 A_Zoomfactor(.96)
		PR4L J 1 A_Zoomfactor(.98)
		PR4L G 1 A_Zoomfactor(1.0)
		Goto Ready3+6
		
		
////////////////////////////

	RightToLeft:
		TNT1 A 0 A_JumpIfInventory("Reloading",1,"Reload")
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",10,1)
        Goto Reload
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradedRightToLeft")	
		PRIF A 1 A_Zoomfactor(.98)
		PR3L J 1 A_Zoomfactor(.96)
		PR3L M 1 A_Zoomfactor(.94)
		TNT1 A 0 A_PlaySound("plamersh",1, 1, 1)
		TNT1 A 0 A_PlaySound("PLSTHRW",3)
		PR3L N 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(-27,-33),0,-8);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L O 1 BRIGHT	A_FireCustomMissile("HotPlasmaGas",random(-20,-27),0,-8)
		PR3L J 1 
		TNT1 A 0 A_PlaySound("PLSTHRW",4)
		PR3L K 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(-12,-18),0,-4);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L L 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-5,-10),0,-4)
		PR3L G 1 A_FireCustomMissile("HotPlasmaGas",random(-1,-1),0,-4)
		TNT1 A 0 A_PlaySound("PLSTHRW",5)
		PR3L H 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(-3,3));
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L I 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-4,7))
		PR3L D 1 A_FireCustomMissile("HotPlasmaGas",random(-2,9))
		TNT1 A 0 A_PlaySound("PLSTHRW",6)
		PR3L B 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(27,33),0,8);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L C 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(23,29),0,8)
		PR3L A 1 A_FireCustomMissile("HotPlasmaGas",random(20,26),0,4)
		TNT1 A 0 A_PlaySound("PLSTHRW",7)
		PR3L E 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(8,16),0,4);
			A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0);
			A_Takeinventory("M2PlasmaAmmo",2);
			A_TakeInventory("RightM2PlasmagunAmmo", 2);
			A_TakeInventory("DoubleM2PlasmagunAmmo", 2);
			}
		PR3L F 1 BRIGHT {
			A_FireCustomMissile("HotPlasmaGas",random(4,8),0,4);
			A_StopSound(1);
			A_PlaySound("plameren",2);
			}
		PR3L A 1 A_Zoomfactor(.96)
		PR3L D 1 A_Zoomfactor(.98)
		PR3L G 1 A_Zoomfactor(1.0)
		Goto ready3
		
	UpgradedRightToLeft:
		PR2F A 1 A_Zoomfactor(.98)
		PR4L J 1 A_Zoomfactor(.96)
		PR4L M 1 A_Zoomfactor(.94)
		TNT1 A 0 A_PlaySound("plamersh",1, 1, 1)
		TNT1 A 0 A_PlaySound("PLSTHRW",3)
		PR4L N 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-27,-33),0,-8)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L O 1 BRIGHT	A_FireCustomMissile("HotPlasmaGas",random(-20,-27),0,-8)
		
		PR4L J 1 
		TNT1 A 0 A_PlaySound("PLSTHRW",4)
		PR4L K 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-12,-18),0,-4)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L L 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-5,-10),0,-4)
		
		PR4L G 1 A_FireCustomMissile("HotPlasmaGas",random(-1,-1),0,-4)
		TNT1 A 0 A_PlaySound("PLSTHRW",5)
		PR4L H 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-3,3))
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L I 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(-4,7))
		
		PR4L D 1 A_FireCustomMissile("HotPlasmaGas",random(-2,9))
		TNT1 A 0 A_PlaySound("PLSTHRW",6)
		PR4L B 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(27,33),0,8)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L C 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(23,29),0,8)
		
		PR4L A 1 A_FireCustomMissile("HotPlasmaGas",random(20,26),0,4)
		TNT1 A 0 A_PlaySound("PLSTHRW",7)
		PR4L E 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(8,16),0,4)
		TNT1 A 0 A_FireCustomMissile("ShakeYourAssMinor", 0, 0, 0, 0)
		TNT1 A 0 A_Takeinventory("M2PlasmaAmmo",2)
		TNT1 A 0 A_TakeInventory("RightM2PlasmagunAmmo", 2)//Remove the fake ammo
		TNT1 A 0 A_TakeInventory("DoubleM2PlasmagunAmmo", 2)
		PR4L F 1 BRIGHT A_FireCustomMissile("HotPlasmaGas",random(4,8),0,4)
		TNT1 A 0 A_StopSound(1)
		TNT1 A 0 A_PlaySound("plameren",2)
		PR4L A 1 A_Zoomfactor(.96)
		PR4L D 1 A_Zoomfactor(.98)
		PR4L G 1 A_Zoomfactor(1.0)
		Goto Ready3+6
		
	CheckLightningReload:
		TNT1 A 0 A_PlaySound("PLSMLG1")
		PR1G FE 1
		PR3G ABCDE 1
		Goto ResumeUpgradedReloading
	UpgradedReloading:
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1,"CheckLightningReload")
		ResumeUpgradedReloading:
		TNT1 A 0 A_PlaySound("PLSM2RL",9)
		P42R A 1
		TNT1 A 0 A_PlaySound("PLCHM2")
		P42R A 1
		TNT1 A 0 A_StopSound(6)
        P42R BCD 2
		TNT1 A 0 A_JumpIfInventory("M2PlasmaUnloaded", 1, "ReloadUnloadedUpgradedWeapon")
		TNT1 A 0 A_FireCustomMissile("GunFireSmoke", -40, 0, -6, -9, 0, 0)
		TNT1 A 0 A_Playsound("Weapons/CellEject",2)
		P42R FFWXYZ 1
		TNT1 A 0 A_FireCustomMissile ("PlasmaCaseSpawn", 192, 0, -20, 2, random (0, 160))
		ReloadUnloadedUpgradedWeapon:
		P42R GGG 3
		P42R GGGIJKL 2
		TNT1 A 0 A_PlaySound("PLREADY",7)		
		P42R MM 2
		TNT1 A 0 A_Playsound("Weapons/CellKickIn",3)
		P42R NNOPQSTUV 2
        PR2R A 1
    InsertBullets2:
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",50,"FinishReload2")
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto FinishReload2
		TNT1 A 0 {
			A_Giveinventory("M2PlasmaAmmo",1);
			A_Giveinventory("RightM2PlasmagunAmmo", 1);
			A_Giveinventory("DoubleM2PlasmagunAmmo", 1);
			A_Takeinventory("Cell",1);
			}
		Goto InsertBullets2
	FinishReload2:
		TNT1 A 0 A_Takeinventory("M2PlasmaUnloaded",1)
		TNT1 A 0 A_Takeinventory("Reloading",1)
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1,1)
        Goto Ready3
		TNT1 A 0 A_PlaySound("PLSMLG2")
		PR3G EDCBA 1
		PR1G EF 1
        Goto Ready2
		
	Reload:
		TNT1 A 0 A_StopSound(7)
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",50,"Ready3")
 		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto Ready3
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradedReloading")	
	ResumeNormalReloading:
		TNT1 A 0 {
			A_SetCrosshair(5);
			A_GiveInventory("RespectPlasmaGun");
			A_Giveinventory("PB_LockScreenTilt",1);
			A_PlaySoundEx("PLSM2RL", "Auto");
		}
		M221 IGH 1
		M220 ABCDEFG 1
		TNT1 A 0 A_FireCustomMissile("GunFireSmoke", -40, 0, -6, -9, 0, 0)
		TNT1 A 0 A_PlaysoundEx("Weapons/CellEject","Auto")
		M220 HIJ 1 
		TNT1 A 0 A_FireCustomMissile ("PlasmaCaseSpawn", 192, 0, -20, 2, random (0, 160))
		M220 KKKKKKKKK 1
		M220 LMNOPQ 1 
		TNT1 A 0 A_PlaySoundEx("PLREADY","Auto")	
		M220 RSTUUUUUVW 1
		TNT1 A 0 A_PlaysoundEx("Weapons/CellKickIn","Auto")
		M220 XYZ 1
		M221 ABCDE 1
		TNT1 A 0 A_PlaySoundEx("weapons/carbine/fancybutton", "Auto")
		M221 FFFFGHI 1
		//TNT1 A 0 A_PlaySound("PLCHM2")
		//TNT1 A 0 A_StopSound(6)
		//TNT1 A 0 A_JumpIfInventory("M2PlasmaUnloaded", 1, "ReloadUnloadedWeapon")
    InsertBullets:
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",50,"FinishReload")
		TNT1 A 0 A_JumpIfInventory("Cell",1,1)
		Goto FinishReload
		TNT1 A 0 {
			A_Giveinventory("M2PlasmaAmmo",1);
			A_Giveinventory("RightM2PlasmagunAmmo", 1);
			A_Giveinventory("DoubleM2PlasmagunAmmo", 1);
			A_Takeinventory("Cell",1);
			}
		Goto InsertBullets
	FinishReload:
		TNT1 A 0 A_Takeinventory("M2PlasmaUnloaded",1)
		TNT1 A 0 A_Takeinventory("Reloading",1)
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1,2)
        Goto ready3
		TNT1 A 0 A_PlaySound("PLSMLG2")
		PR1G ABCDEF 1
        Goto Ready3
		
	AlreadyUnloaded:
		TNT1 A 0 A_Takeinventory("Unloading",1)
		Goto ready3
	CheckLightningUnload:
		TNT1 A 0 A_PlaySound("PLSMLG1")
		PR1G FEDCBA 1
		Goto ResumeUpgradedUnloading
	UpgradedUnloading:
		TNT1 A 0 A_JumpIfInventory("LightningGunMode",1,"CheckLightningUnload")
	ResumeUpgradedUnloading:
		P42R BCDG 2
		TNT1 A 0 A_PlaySound("Weapons/CellKickIn")
		P42R NMLKJIH 2
        P42R GDCB 2
	RemoveBullets2:
		TNT1 AAAA 0
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",1,1)
		Goto FinishUnload2
		TNT1 A 0 {
			A_Takeinventory("M2PlasmaAmmo",1);
			A_Takeinventory("RightM2PlasmagunAmmo", 1);
			A_Takeinventory("DoubleM2PlasmagunAmmo", 1);
			A_Giveinventory("Cell",1);
			}
		Goto RemoveBullets2
	FInishUnload2:
		TNT1 A 0 A_GiveInventory("M2PlasmaUnloaded", 1)
		TNT1 A 0 A_Takeinventory("Unloading",1)
		Goto ready3
	Unload:
		TNT1 A 0 A_JumpIfInventory("M2PlasmaUnloaded", 1, "Ready3")
		TNT1 A 0 {
			A_StopSound(6);
			A_Takeinventory("Unloading",1);
			}
        TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",1,1)
        Goto ready3
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradedUnloading")	
		TNT1 A 0 A_Takeinventory("Zoomed",1)
		M221 IGH 1
		M221 FEDCBA 1
		M220 ZYXWVU 1 
		TNT1 A 0 A_PlaySound("Weapons/CellKickIn")
		M220 TSRQPONM 1
		M220 FEDCBA 1
		M221 HGI 1
	RemoveBullets:
		TNT1 A 0 A_JumpIfInventory("M2PlasmaAmmo",1,1)
		Goto FinishUnload
		TNT1 A 0 {
			A_Takeinventory("M2PlasmaAmmo",1);
			A_Takeinventory("RightM2PlasmagunAmmo", 1);
			A_Takeinventory("DoubleM2PlasmagunAmmo", 1);
			A_Giveinventory("Cell",1);
			}
		Goto RemoveBullets
	FInishUnload:
		TNT1 A 0 {
			A_GiveInventory("M2PlasmaUnloaded", 1);
			A_Takeinventory("Unloading",1);
			}
		Goto ready3

	Flash:
		TNT1 A 4
        Goto LightDone
	Spawn:
		M2PR A -1
		Stop
		
    FlashKicking:
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradeFlashKicking")	
		PRIR B 1 
		PRIR C 1 
		PRIR D 1 
		PRIR E 3 
		PRIR F 3
		PRIR E 3 
		PRIR D 1 
		PRIR C 1 
		PRIR B 1 
		PRIR AAA 1 
		Stop
		
	UpgradeFlashKicking:
		PR2R B 1 
		PR2R C 1 
		PR2R D 1 
		PR2R E 3 
		PR2R F 3
		PR2R E 3 
		PR2R D 1 
		PR2R C 1 
		PR2R B 1 
		PR2R AAA 1 
		Stop
		
	FlashAirKicking:
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradeAirFlashKicking")	
		PRIR B 1 
		PRIR C 1 
		PRIR D 1 
		PRIR E 3 
		PRIR F 3
		PRIR E 3 
		PRIR D 1 
		PRIR C 1 
		PRIR B 1 
		PRIR AAAA 1 
		Stop
		
	UpgradeAirFlashKicking:
		PR2R B 1 
		PR2R C 1 
		PR2R D 1 
		PR2R E 3 
		PR2R F 3
		PR2R E 3 
		PR2R D 1 
		PR2R C 1 
		PR2R B 1 
		PR2R AAAA 1 
		Stop
		
	FlashSlideKicking:
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradeFlashSlideKicking")	
		PRIR B 2
		PRIR C 2 
		PRIR DDDEEEEFFEE 2  
		Stop
		
	UpgradeFlashSlideKicking:
		PR2R B 2
		PR2R C 2 
		PR2R DDDEEEEFFEE 2  
		Stop
		
	FlashSlideKickingStop:
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradeFlashSlideKickingStop")	
		PRIR D 1
		PRIR C 1
		PRIR BBA 1 
		PRIR A 1 
		Stop	
		
	UpgradeFlashSlideKickingStop:
		PR2R D 1
		PR2R C 1
		PR2R BBA 1 
		PR2R A 1 
		Stop

	FlashPunching:
		TNT1 A 0 A_JumpIfInventory("HasLightningGunUpgrade", 1,"UpgradeFlashPunching")	
		PRIR B 1 
		PRIR C 1 
		PRIR D 1 
		PRIR E 3 
		PRIR F 3
		PRIR E 3 
		PRIR D 1 
		PRIR C 1 
		PRIR B 1 
		PRIR AAA 1 
		Stop

	UpgradeFlashPunching:
		PR2R B 1 
		PR2R C 1 
		PR2R D 1 
		PR2R E 3 
		PR2R F 3
		PR2R E 3 
		PR2R D 1 
		PR2R C 1 
		PR2R B 1 
		PR2R AAA 1 
		Stop
	}
}

ACTOR HeavyPlasmaBall: Plasma_ball
{
	Radius 10
	Height 10
	Speed 80
	Damage 10
    DamageType Plasma
	Decal "Scorch"
	Projectile
	+RANDOMIZE
renderstyle ADD
Scale 0.2
	//Translation "0:255=%[0,0,0]:[0,0,1]"
	DeathSound "weapons/plasmax"
	//SeeSound "PLSM8"
    SeeSound "None"
	Obituary "$OB_MPPLASMARIFLE"
	States
	{
	Spawn:
			DB20 ABCDEFGHIJLMNOPQRSTUVWXYZ 2 BRIGHT 
			{	
				A_SpawnItem("BlueFlareSmall",0,0);
				A_SpawnItemEx("FreezerTrailSparksSmall", random(4,-4), random(4,-4), random(4,-4), 0, 0, 0, 0, 128, 0);
			}
		Loop

Xdeath:
    TNT1 A 0 A_SpawnItem ("Plasma_Puff", 0)
	TNT1 AAAA 0 A_CustomMissile ("BluePlasmaFireSmall2", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAA 0 A_CustomMissile ("SuperPlasmaFire", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAAAA 0 A_CustomMissile ("BluePlasmaParticle", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAAAA 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
    TNT1 A 0 A_Explode(6,90,0)
	TNT1 A 1 Light("LightningImpactLight")
	TNT1 B 4
		
		Stop

	Death:
    TNT1 A 0 A_SpawnItem ("Plasma_Puff", 0)
    //TNT1 A 0 A_SpawnItem ("RailPuff", 0)
    TNT1 A 0 A_Explode(6,90,0)
	TNT1 AAAA 0 A_CustomMissile ("BluePlasmaFireSmall2", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAA 0 A_CustomMissile ("SuperPlasmaFire", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAAAAAAAAAAAAAA 0 A_CustomMissile ("BluePlasmaParticle", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 A 0 A_SpawnItemEx ("DetectFloorCraterSmall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNT1 A 0 A_SpawnItemEx ("DetectCeilCraterSmall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNT1 A 1 Light("LightningImpactLight")
    TNT1 B 4	
	TNT2 AAAA 4 A_CustomMissile ("PlasmaSmoke", 1, 0, random (0, 360), 2, random (0, 160))
		Stop
		
		
		
	}
}

ACTOR AltHeavyPlasmaBall: Plasma_ball
{
	Radius 10
	Height 10
	Speed 80
	Damage 12
    DamageType SuperPlasma
	Decal "Scorch"
	Projectile
	+RANDOMIZE
renderstyle add
Scale 0.2
	//Translation "0:255=%[0,0,0]:[0,0,1]"
	DeathSound "weapons/plasmax"
	//SeeSound "PLSM8"
    SeeSound "None"
	Obituary "$OB_MPPLASMARIFLE"
	States
	{
	Spawn:
			DB20 ABCDEFGHIJLMNOPQRSTUVWXYZ 1 BRIGHT 
			{	
				A_SpawnItem("BlueFlareSmall",0,0);
				A_SpawnItemEx("FreezerTrailSparksSmall", random(4,-4), random(4,-4), random(4,-4), 0, 0, 0, 0, 128, 0);
			}
		Loop


Xdeath:
    TNT1 A 0 A_SpawnItem ("Plasma_Puff", 0)
	TNT1 AAAA 0 A_CustomMissile ("BluePlasmaFireSmall2", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAA 0 A_CustomMissile ("SuperPlasmaFire", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAAAA 0 A_CustomMissile ("BluePlasmaParticle", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAAAA 0 A_CustomMissile ("FreezerTrailSparksSmall", 0, 0, random (0, 360), 2, random (0, 360))
    TNT1 A 0 A_Explode(6,90,0)
	TNT1 A 1 Light("LightningImpactLight")
	TNT1 B 4
	TNT2 AAAA 4 A_CustomMissile ("PlasmaSmoke", 1, 0, random (0, 360), 2, random (0, 160))
		Stop

	Death:
    TNT1 A 0 A_SpawnItem ("Plasma_Puff", 0)
    //TNT1 A 0 A_SpawnItem ("RailPuff", 0)
    TNT1 A 0 A_Explode(6,90,0)
	TNT1 AAAA 0 A_CustomMissile ("BluePlasmaFireSmall2", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAA 0 A_CustomMissile ("SuperPlasmaFire", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 AAAAAAAAAAAAAAAAA 0 A_CustomMissile ("BluePlasmaParticle", 0, 0, random (0, 360), 2, random (0, 360))
	TNT1 A 0 A_SpawnItemEx ("DetectFloorCraterSmall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNT1 A 0 A_SpawnItemEx ("DetectCeilCraterSmall",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0)
	TNT1 A 1 Light("LightningImpactLight")
    TNT1 B 4	
		Stop
		
		
	}
}



Actor SuperPlasmaFire
{
  Height 0
  Radius 0
  Mass 0
  +Missile
  +NoBlockMap
  -NoGravity
  //+LowGravity
  +DontSplash
  +DoomBounce
  +FORCEXYBILLBOARD
  BounceFactor 0.2
  Gravity 0.8
  RenderStyle Add
  Scale 0.035
  //Speed 2
  Speed 2
    +NoGravity
  -DOOMBOUNCE
  RenderStyle Add
  Scale 0.7
  Alpha 0.9
  States
  {
  Spawn:
  Death:
    FIR6 ABCDEFGHIJKLMNOP 1 Bright A_FadeOut(0.04)
    Stop
  }
}

Actor BluePlasmaFireSmall2
{
  Height 0
  Radius 0
  Mass 0
  +Missile
  +NoBlockMap
  -NoGravity
  //+LowGravity
  +DontSplash
  +DoomBounce
  +FORCEXYBILLBOARD
  BounceFactor 0.2
  Gravity 0.8
  RenderStyle Add
  Scale 0.035
  Speed 0
    +NoGravity
  -DOOMBOUNCE
  RenderStyle Add
  Scale 0.25
  Alpha 0.85
  States
  {
  Spawn:
  Death:
    FIR6 ABCDEFGHIJKLMNOP 1 Bright A_FadeOut(0.05)
    Stop
  }
}

Actor BluePlasmaFireSmall
{
  Height 0
  Radius 0
  Mass 0
  +Missile
  +NoBlockMap
  -NoGravity
  //+LowGravity
  +DontSplash
  +DoomBounce
  +FORCEXYBILLBOARD
  BounceFactor 0.2
  Gravity 0.8
  RenderStyle Add
  Scale 0.035
  Speed 0
    +NoGravity
  -DOOMBOUNCE
  RenderStyle Add
  Scale 0.25
  Alpha 0.85
  States
  {
  Spawn:
  Death:
    FIR5 ABCDEFGHIJKLMNOP 1 Bright A_FadeOut(0.05)
    Stop
  }
}


Actor LightningGunProjectile: FastProjectile
{
	+RANDOMIZE
	+FORCEXYBILLBOARD
	+DONTSPLASH
	-BLOODSPLATTER
	+FORCERADIUSDMG
	damage 0
	radius 1
	height 1
	speed 500
  Mass 9999999
	renderstyle ADD
	//alpha 0.9
	scale .15
	decal "none"
	damagetype "Plasma"
	missiletype "ElectroBlastTrail"
	states
		{
		Spawn:
			TNT1 A 1 BRIGHT
			Loop
			
		Death:
			TNT1 A 0 BRIGHT A_SpawnItem("LightningGunPuff",0)
			TNT1 A 0 BRIGHT A_SpawnItem("BlueFlare",0)
			TNT1 AA 0 A_SpawnItemEx("FreezerTrailSparksSmall", random(4,-4), random(4,-4), random(4,-4), 0, 0, 0, 0, 128, 0)
			TNT1 A 0 A_explode(random(12,15), 80)
			TNT1 AAA 0 A_CustomMissile ("BluePlasmaParticle", 0, 0, random (0, 360), 2, random (0, 360))
			TNT1 A 1 Light("LightningImpactLight")
			Stop
		}
	}

Actor LightningGunPuff
{
  -COUNTKILL
  -SHOOTABLE
  +CLIENTSIDEONLY
  +BLOODLESSIMPACT 
  +FORCEXYBILLBOARD
  +THRUACTORS
  +NOGRAVITY
  +NODAMAGETHRUST
  +DONTTHRUST
  +DONTSPLASH
  -SHOOTABLE
  +RANDOMIZE
  Mass 9999999
  RenderStyle Add
  Speed 0
  Radius 1
  Height 1
	damagetype "Plasma"
	Scale 1.12
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_CheckFloor("FloorCheck")
			TNT1 A 1
			Die:
			DB08 ABCDEFGHIJKLM 1 bright A_SetScale(ScaleX+frandom(0.04,0.08), ScaleY+frandom(0.04,0.08))
			DB08 NOPQRSTUVWXYZABCDEFGHIJKLM 1 bright
				{
					A_SetScale(ScaleX-0.08, ScaleY-0.08);
					A_FadeOut(0.08);
				}
			Stop
			
		FloorCheck:
			TNT1 A 0 Acs_executealways(373, 0, 0, 0, 0)//Check if is under a liquid
			TNT1 A 2
			TNT1 A 0 A_JumpIfInventory("IsOverWater", 1, "ConductiveDeath")
			TNT1 A 0 A_JumpIfInventory("IsOverSludge", 1, "ConductiveDeath")
			TNT1 A 0 A_JumpIfInventory("IsOverSlime", 1, "ConductiveDeath")
			TNT1 A 0 A_JumpIfInventory("IsOverBlood", 1, "ConductiveDeath")
			TNT1 A 1
			Goto Die	
			
		ConductiveDeath:
			TNT1 A 0 BRIGHT A_SpawnItem("LightningGunPuff_Big",0)
			TNT1 A 0 BRIGHT A_SpawnItem("ElectroBombFX",0)
			TNT1 A 0 BRIGHT A_SpawnItem("BlueFlare",0)
			TNT1 A 0 A_explode(random(30,35), 240,0,0,200)
			TNT1 AA 0 A_CustomMissile("ElectroBlastTrail3",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(30,270))
			TNT1 AAAAA 0 A_CustomMissile ("BluePlasmaParticle", 0, 0, random (0, 360), 2, random (0, 360))
			TNT1 A 1 Light("LightningImpactLight")
			Stop
	}
}

Actor LightningGunPuff_Big
{
  -COUNTKILL
  -SHOOTABLE
  +CLIENTSIDEONLY
  +BLOODLESSIMPACT 
  +FORCEXYBILLBOARD
  +THRUACTORS
  +NOGRAVITY
  +NODAMAGETHRUST
  +DONTSPLASH
  +RANDOMIZE
	  RenderStyle Add
		Scale 2.50
		States 
		{
		
			Spawn:
				DB08 ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ 1 bright 
				{
					A_SetScale(ScaleX-0.1, ScaleY-0.1);
					A_FadeOut(0.03);
				}
				Stop
		
		}
}

Actor LightningGunPuff_Bigger : LightningGunPuff_Big
{Scale 3.25}

actor ElectroBlastTrail
{
	+VISIBILITYPULSE
	Radius 0
	Height 0
	+NOGRAVITY
	+NOINTERACTION
	Speed 0
	+RANDOMIZE
	+DontSplash
	+THRUACTORS
	+NOBLOOD
	RenderStyle Add
	//Alpha 0.4
	Scale 0.27
	States
	{
	Spawn:
			TNT1 A 0
			TNT1 A 0 A_Jump (256, "Spawn2", "Spawn3", "Spawn4", "Spawn5", "Spawn6", "Spawn7", "Spawn8", "Spawn9", "Spawn10")
			DLI6 ABCDEFGHIJK 1 bright
			Stop
		Spawn2:
			TNT1 A 0
			DLI7 ABCDEFGHIJK 1 bright
			Stop
		Spawn2:
			TNT1 A 0
			DLI8 ABCDEFGHIJK 1 bright
			Stop
		Spawn3:
			TNT1 A 0
			DLI9 ABCDEFGHIJK 1 bright
			Stop
		Spawn4:
			TNT1 A 0
			DLI0 ABCDEFGHIJK 1 bright
			Stop
		Spawn5:
			TNT1 A 0
			DLI6 ABCDEFGHIJK 1 bright
			Stop
		Spawn6:
			TNT1 A 0
			DLI7 LMNOPQRSTUV 1 bright
			Stop
		Spawn7:
			TNT1 A 0
			DLI8 LMNOPQRSTUV 1 bright
			Stop
		Spawn8:
			TNT1 A 0
			DLI9 LMNOPQRSTUV 1 bright
			Stop
		Spawn9:
			TNT1 A 0
			DLI0 LMNOPQRSTUV 1 bright
			Stop
		Spawn10:
			TNT1 A 0
			DLI0 ABCDEFGHIJK 1 bright
			Stop
	}
}

Actor ElectroBlastTrail2 : ElectroBlastTrail
{
	Speed 10
}

Actor ElectroBlastTrail3 : ElectroBlastTrail
{
	Speed 10
	Scale 0.62
}



Actor StunElectrocute : ElectroBlastTrail
{
	Scale 0.32
	States
	{
	Spawn:
			TNT1 A 0
			TNT1 A 0 A_Playsound("Sparks/Spawn")
			TNT1 A 0 A_Jump (256, "Spawn2", "Spawn3", "Spawn4", "Spawn5", "Spawn6", "Spawn7", "Spawn8", "Spawn9", "Spawn10")
			DLI6 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
		Spawn2:
			TNT1 A 0
			DLI7 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
		Spawn2:
			TNT1 A 0
			DLI8 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
		Spawn3:
			TNT1 A 0
			DLI9 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
		Spawn4:
			TNT1 A 0
			DLI0 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
		Spawn5:
			TNT1 A 0
			DLI6 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
		Spawn6:
			TNT1 A 0
			DLI7 LMNOPQRSTUV 1 bright Light("ElectrocutionLight")
			Stop
		Spawn7:
			TNT1 A 0
			DLI8 LMNOPQRSTUV 1 bright Light("ElectrocutionLight")
			Stop
		Spawn8:
			TNT1 A 0
			DLI9 LMNOPQRSTUV 1 bright Light("ElectrocutionLight")
			Stop
		Spawn9:
			TNT1 A 0
			DLI0 LMNOPQRSTUV 1 bright Light("ElectrocutionLight")
			Stop
		Spawn10:
			TNT1 A 0
			DLI0 ABCDEFGHIJK 1 bright Light("ElectrocutionLight")
			Stop
	}
}

Actor ElectroBombFX
{
   Speed 0
   Damage 0
   PROJECTILE
   RENDERSTYLE ADD
   Damagetype plasma
   Scale 0.35
   +THRUGHOST
   +THRUACTORS
   +FORCEXYBILLBOARD
   +NoGravity
   +DONTSPLASH
   States
   {
   Spawn:
	  TNT1 A 0
	  TNT1 A 0 A_PlaySound("LGBOMB")
	  STFL ABCDEFGHIJKLMNOP 1 Bright A_SetScale(ScaleX+0.05,ScaleY+0.05)
	  STFL ABCDE 1 BRIGHT A_FadeOut(0.2)
	  Stop
	  }
}

Actor StunBomb
{
   Radius 2
   Height 2
   Speed 24
   Damage 0
  // PROJECTILE
   RENDERSTYLE ADD
   //Alpha 0.80
   Damagetype Stun //New Damage type!
   Scale 0.1
    +MISSILE
   +THRUGHOST
   +FORCEXYBILLBOARD
    Gravity .5
   SeeSound ""
   DeathSound "LGBOMB"
   States
   {
   Spawn:
      TNT1 A 0
      TNT1 A 0 A_PlaySound("PZAPFLY", 6,1,1)
      STFL ABCD 1 A_SetScale(ScaleX+0.02,ScaleY+0.02)
	  Fly:
	  STFL EFGH 1 Bright A_CustomMissile("ElectroBlastTrail",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(-40,40))
	  STFL IJKL 1 Bright Light("LightningImpactLight") A_CustomMissile("ElectroBlastTrail",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(-40,40))
	  STFL MNOP 1 Bright A_CustomMissile("ElectroBlastTrail",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(-40,40))
      STFL ABCD 1 Bright Light("LightningImpactLight") A_CustomMissile("ElectroBlastTrail",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(-40,40))
	  Loop
	  
   Death:
	  TNT1 A 0
	  TNT1 A 0 A_ChangeFlag("NOGRAVITY", 1)
	  TNT1 A 0 A_StopSound(6)
      STFL ABCDEFGHIJKL 1 BRIGHT Light("LightningImpactLight") A_SetScale(ScaleX+0.1,ScaleY+0.1)
	  TNT1 A 0 BRIGHT A_SpawnItem("LightningGunPuff_Bigger",0)
	  TNT1 A 0 BRIGHT A_SpawnItem("BlueFlare",0)
	  TNT1 A 0 A_explode(2, 300,0,0,300)
	  TNT1 A 0 A_PlaySound("STNBOEX", 3)
	  TNT1 AAAAAAAAAAA 0 A_CustomMissile("ElectroBlastTrail3",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(30,270))
	  XELC AABBCCDDEEFF 1 Bright Light("LightningImpactLight") A_CustomMissile("ElectroBlastTrail3",6,0,random(0,359),CMF_AIMDIRECTION|CMF_TRACKOWNER,random(30,270))
	  Stop
	  }
}
